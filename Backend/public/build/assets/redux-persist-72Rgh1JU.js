import{b as Q}from"./redux-DITMfSWq.js";import{r as Z}from"./react-ZtzTtHoT.js";var W="persist:",N="persist/FLUSH",M="persist/REHYDRATE",B="persist/PAUSE",Y="persist/PERSIST",q="persist/PURGE",J="persist/REGISTER",C=-1;function E(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(r){return typeof r}:E=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},E(e)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k(r,!0).forEach(function(n){te(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function re(e,t,r,n){n.debug;var i=ee({},r);return e&&E(e)==="object"&&Object.keys(e).forEach(function(u){u!=="_persist"&&t[u]===r[u]&&(i[u]=e[u])}),i}function ne(e){var t=e.blacklist||null,r=e.whitelist||null,n=e.transforms||[],i=e.throttle||0,u="".concat(e.keyPrefix!==void 0?e.keyPrefix:W).concat(e.key),a=e.storage,f;e.serialize===!1?f=function(h){return h}:typeof e.serialize=="function"?f=e.serialize:f=ie;var s=e.writeFailHandler||null,p={},l={},o=[],b=null,v=null,R=function(h){Object.keys(h).forEach(function(y){O(y)&&p[y]!==h[y]&&o.indexOf(y)===-1&&o.push(y)}),Object.keys(p).forEach(function(y){h[y]===void 0&&O(y)&&o.indexOf(y)===-1&&p[y]!==void 0&&o.push(y)}),b===null&&(b=setInterval(d,i)),p=h};function d(){if(o.length===0){b&&clearInterval(b),b=null;return}var c=o.shift(),h=n.reduce(function(y,g){return g.in(y,c,p)},p[c]);if(h!==void 0)try{l[c]=f(h)}catch(y){console.error("redux-persist/createPersistoid: error serializing state",y)}else delete l[c];o.length===0&&_()}function _(){Object.keys(l).forEach(function(c){p[c]===void 0&&delete l[c]}),v=a.setItem(u,f(l)).catch(S)}function O(c){return!(r&&r.indexOf(c)===-1&&c!=="_persist"||t&&t.indexOf(c)!==-1)}function S(c){s&&s(c)}var w=function(){for(;o.length!==0;)d();return v||Promise.resolve()};return{update:R,flush:w}}function ie(e){return JSON.stringify(e)}function oe(e){var t=e.transforms||[],r="".concat(e.keyPrefix!==void 0?e.keyPrefix:W).concat(e.key),n=e.storage;e.debug;var i;return e.deserialize===!1?i=function(a){return a}:typeof e.deserialize=="function"?i=e.deserialize:i=ue,n.getItem(r).then(function(u){if(u)try{var a={},f=i(u);return Object.keys(f).forEach(function(s){a[s]=t.reduceRight(function(p,l){return l.out(p,s,f)},i(f[s]))}),a}catch(s){throw s}else return})}function ue(e){return JSON.parse(e)}function se(e){var t=e.storage,r="".concat(e.keyPrefix!==void 0?e.keyPrefix:W).concat(e.key);return t.removeItem(r,ae)}function ae(e){}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H(r,!0).forEach(function(n){fe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function le(e,t){if(e==null)return{};var r=pe(e,t),n,i;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(i=0;i<u.length;i++)n=u[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pe(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,u;for(u=0;u<n.length;u++)i=n[u],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var ce=5e3;function We(e,t){var r=e.version!==void 0?e.version:C;e.debug;var n=e.stateReconciler===void 0?re:e.stateReconciler,i=e.getStoredState||oe,u=e.timeout!==void 0?e.timeout:ce,a=null,f=!1,s=!0,p=function(o){return o._persist.rehydrated&&a&&!s&&a.update(o),o};return function(l,o){var b=l||{},v=b._persist,R=le(b,["_persist"]),d=R;if(o.type===Y){var _=!1,O=function(T,P){_||(o.rehydrate(e.key,T,P),_=!0)};if(u&&setTimeout(function(){!_&&O(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},u),s=!1,a||(a=ne(e)),v)return m({},t(d,o),{_persist:v});if(typeof o.rehydrate!="function"||typeof o.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return o.register(e.key),i(e).then(function(g){var T=e.migrate||function(P,ze){return Promise.resolve(P)};T(g,r).then(function(P){O(P)},function(P){O(void 0,P)})},function(g){O(void 0,g)}),m({},t(d,o),{_persist:{version:r,rehydrated:!1}})}else{if(o.type===q)return f=!0,o.result(se(e)),m({},t(d,o),{_persist:v});if(o.type===N)return o.result(a&&a.flush()),m({},t(d,o),{_persist:v});if(o.type===B)s=!0;else if(o.type===M){if(f)return m({},d,{_persist:m({},v,{rehydrated:!0})});if(o.key===e.key){var S=t(d,o),w=o.payload,c=n!==!1&&w!==void 0?n(w,l,S,e):S,h=m({},c,{_persist:m({},v,{rehydrated:!0})});return p(h)}}}if(!v)return t(l,o);var y=t(d,o);return y===d?l:p(m({},y,{_persist:v}))}}function G(e){return de(e)||ve(e)||ye()}function ye(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function ve(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function de(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K(r,!0).forEach(function(n){he(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function he(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var V={registry:[],bootstrapped:!1},me=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:V,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case J:return z({},t,{registry:[].concat(G(t.registry),[r.key])});case M:var n=t.registry.indexOf(r.key),i=G(t.registry);return i.splice(n,1),z({},t,{registry:i,bootstrapped:i.length===0});default:return t}};function Me(e,t,r){var n=Q(me,V,void 0),i=function(s){n.dispatch({type:J,key:s})},u=function(s,p,l){var o={type:M,payload:p,err:l,key:s};e.dispatch(o),n.dispatch(o)},a=z({},n,{purge:function(){var s=[];return e.dispatch({type:q,result:function(l){s.push(l)}}),Promise.all(s)},flush:function(){var s=[];return e.dispatch({type:N,result:function(l){s.push(l)}}),Promise.all(s)},pause:function(){e.dispatch({type:B})},persist:function(){e.dispatch({type:Y,register:i,rehydrate:u})}});return a.persist(),a}var F={},L={};L.__esModule=!0;L.default=Pe;function I(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?I=function(r){return typeof r}:I=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},I(e)}function A(){}var be={getItem:A,setItem:A,removeItem:A};function Oe(e){if((typeof self>"u"?"undefined":I(self))!=="object"||!(e in self))return!1;try{var t=self[e],r="redux-persist ".concat(e," test");t.setItem(r,"test"),t.getItem(r),t.removeItem(r)}catch{return!1}return!0}function Pe(e){var t="".concat(e,"Storage");return Oe(t)?self[t]:be}F.__esModule=!0;F.default=Se;var ge=_e(L);function _e(e){return e.__esModule?e:{default:e}}function Se(e){var t=(0,ge.default)(e);return{getItem:function(n){return new Promise(function(i,u){i(t.getItem(n))})},setItem:function(n,i){return new Promise(function(u,a){u(t.setItem(n,i))})},removeItem:function(n){return new Promise(function(i,u){i(t.removeItem(n))})}}}var we=void 0,Ee=Ie(F);function Ie(e){return e.__esModule?e:{default:e}}var je=(0,Ee.default)("local");we=je;function j(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?j=function(r){return typeof r}:j=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},j(e)}function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Re(e,t,r){return De(e.prototype,t),e}function Te(e,t){return t&&(j(t)==="object"||typeof t=="function")?t:x(e)}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},$(e)}function x(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}function U(e,t){return U=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},U(e,t)}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var X=function(e){Ae(t,e);function t(){var r,n;xe(this,t);for(var i=arguments.length,u=new Array(i),a=0;a<i;a++)u[a]=arguments[a];return n=Te(this,(r=$(t)).call.apply(r,[this].concat(u))),D(x(n),"state",{bootstrapped:!1}),D(x(n),"_unsubscribe",void 0),D(x(n),"handlePersistorState",function(){var f=n.props.persistor,s=f.getState(),p=s.bootstrapped;p&&(n.props.onBeforeLift?Promise.resolve(n.props.onBeforeLift()).finally(function(){return n.setState({bootstrapped:!0})}):n.setState({bootstrapped:!0}),n._unsubscribe&&n._unsubscribe())}),n}return Re(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(Z.PureComponent);D(X,"defaultProps",{children:null,loading:null});const Fe=Object.freeze(Object.defineProperty({__proto__:null,PersistGate:X},Symbol.toStringTag,{value:"Module"}));export{Me as a,we as d,We as p,Fe as r};
