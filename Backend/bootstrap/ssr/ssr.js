import{jsx as s,jsxs as p,Fragment as G}from"react/jsx-runtime";import c,{useEffect as _}from"react";import{createInertiaApp as m}from"@inertiajs/react";import R from"@inertiajs/react/server";import h from"react-dom/server";import g from"react-dom/client";import{Provider as d}from"react-redux";import{MantineProvider as S}from"@mantine/core";import{Notifications as f}from"@mantine/notifications";import{createSlice as v,configureStore as y,isRejectedWithValue as O}from"@reduxjs/toolkit";import{persistReducer as P,persistStore as w}from"redux-persist";import{createApi as A}from"@reduxjs/toolkit/query/react";import{fetchBaseQuery as C}from"@reduxjs/toolkit/query";import I from"redux-persist/lib/storage/index.js";/* empty css                        */const E=(e,t,r)=>{const i=e[t];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((n,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==r?". Note that variables only represent file names one level deep.":""))))})},b="http://127.0.0.1:8000",j=b+"/api",x=C({baseUrl:j,prepareHeaders:(e,{getState:t,endpoint:r})=>{var n,o,u;e.set("Accept","application/json");let i=(u=(o=(n=t())==null?void 0:n.user)==null?void 0:o.value)==null?void 0:u.token;return i&&e.set("Authorization",`Bearer ${i}`),e}}),U=A({baseQuery:x,endpoints:()=>({})}),N={GET_PORTFOLIO_DETAILS:"GET_PORTFOLIO_DETAILS",GET_DASHBOARD:"GET_DASHBOARD",GET_USER_SETTINGS:"GET_USER_SETTINGS",GET_CONTACT_US:"GET_CONTACT_US",GET_LOGIN:"GET_LOGIN",GET_TECHNOLOGY:"GET_TECHNOLOGY",GET_PROJECT:"GET_PROJECT",GET_MESSAGE:"GET_MESSAGE"},a=U.enhanceEndpoints({addTagTypes:Object.values(N)}),L=typeof window>"u",k=()=>({getItem(e){return Promise.resolve(null)},setItem(e,t){return Promise.resolve(t)},removeItem(e){return Promise.resolve()}}),M=L?k():I,D={value:null},T=v({name:"user",initialState:D,reducers:{setReduxUser:(e,t)=>{e.value=t.payload},logoutReduxUser:e=>{e.value=null,l.dispatch(a.util.resetApiState())}}}),{setReduxUser:ce,logoutReduxUser:H}=T.actions,z={key:"root",storage:M},B=P(z,T.reducer),F=typeof window>"u",V=({dispatch:e})=>t=>r=>(O(r)&&r.payload.status===401&&e(H()),t(r)),l=y({reducer:{user:B,[a.reducerPath]:a.reducer},middleware:e=>e({serializableCheck:!1}).concat([a.middleware,V])}),$=()=>F?Promise.reject(new Error("Cannot initialize persistor on the server")):Promise.resolve(w(l)),Q=({children:e})=>{const[t,r]=c.useState(null),[i,n]=c.useState(null);return _(()=>{import("redux-persist/es/integration/react.js").then(({PersistGate:o})=>r(()=>o)).catch(o=>console.error("Failed to load PersistGate:",o)),$().then(o=>n(o)).catch(o=>console.error("Failed to initialize persistor:",o))},[]),!t||!i?s(G,{children:e}):s(t,{loading:null,persistor:i,children:e})};typeof window>"u"?R(e=>m({page:e,render:h.renderToString,resolve:t=>E(Object.assign({"./components/guest/Home.jsx":()=>import("./assets/Home-CCn36rs9.js"),"./components/guest/Login.jsx":()=>import("./assets/Login-C5yFi9jj.js")}),`./components/guest/${t}.jsx`,4),setup:({App:t,props:r})=>s(c.StrictMode,{children:s(d,{store:l,children:p(S,{withGlobalStyles:!0,withNormalizeCSS:!0,withCSSVariables:!0,children:[s(f,{}),s(t,{...r})]})})})})):m({resolve:e=>E(Object.assign({"./components/guest/Home.jsx":()=>import("./assets/Home-CCn36rs9.js"),"./components/guest/Login.jsx":()=>import("./assets/Login-C5yFi9jj.js")}),`./components/guest/${e}.jsx`,4),setup:async({App:e,props:t})=>{const r=document.getElementById("app");if(!r)throw new Error("Root element #app not found");g.hydrateRoot(r,s(c.StrictMode,{children:s(d,{store:l,children:p(S,{withGlobalStyles:!0,withNormalizeCSS:!0,withCSSVariables:!0,children:[s(f,{}),s(Q,{children:s(e,{...t})})]})})}))}});export{N as R,b as S,a as e,ce as s};
